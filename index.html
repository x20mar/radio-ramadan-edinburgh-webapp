<!DOCTYPE html>

<!-- define angular app -->
<html ng-app="rreApp">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Radio Ramadan Edinburgh</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <!-- SCROLLS -->
        <link rel="stylesheet" href="application/style.css" />

        <!-- SPELLS -->
        <script src="libs/jquery-1.10/jquery.min.js"></script>
        <script src="libs/jquery-1.10/jquery-ui.custom.min.js"></script>
        <script src="libs/fullcalendar-1.6.4/fullcalendar.min.js"></script>
        <script src="libs/fullcalendar-1.6.4/gcal.js"></script>
        <script src="libs/snap.min.js"></script>
        <script src="libs/angularjs-1.2.16/angular.min.js"></script>
        <script src="libs/angularjs-1.2.16/angular-bootstrap.min.js"></script>
        <script src="libs/angularjs-1.2.16/angular-route.min.js"></script>
        <script src="libs/angularjs-1.2.16/angular-snap.min.js"></script>
        <script src="libs/angularjs-1.2.16/angular-calendar.js"></script>
        <script src="libs/angularjs-1.2.16/angular-media-player.min.js"></script>
        <script src="libs/plangular/plangular.js"></script>
        <script src="application/namespacer.js"></script>
        <script src="application/config.js"></script>
        <script src="application/language.js"></script>
        <script src="application/main.js"></script>
    </head>

    <!-- define angular controller -->
    <body ng-controller="mainController">

        <div id="shelf-1" snap-drawer>
            <h1>{{Page.menu().MENU}}</h1>
            <ul class="nav nav-pills nav-stacked">
                <li snap-close><a href="#"><i class="fa fa-youtube-play"></i> {{Page.menu().LIVE}}</a></li>
                <li snap-close><a href="#listenagain"><i class="fa fa-music"></i> {{Page.menu().LISTEN_AGAIN}}</a></li>
                <li snap-close><a href="#schedule"><i class="fa fa-calendar-o"></i> {{Page.menu().SCHEDULE}}</a></li>
                <!-- <li><a href="#settings"><i class="fa fa-cog"></i> Settings</a></li> -->
        </div>

        <div id="content" class="scrollable" snap-content snap-options="snapOpts">

            <nav class="navbar navbar-default">
                <div class="container nomargin">
                    <div class="navbar-header">
                        <div class="navbar-brand"><button type="button" class="btn btn-default fa fa-bars" snap-toggle="left"></button> {{Page.title()}}</div>
                    </div>
                </div>
            </nav>

            <div id="main">

                <!-- angular templating -->
                <!-- this is where content will be injected -->
                <div ng-view></div>

            </div>

            <footer class="text-center">
                <p>Create by <a href="http://omara.li">Omar Ali</a> for Radio Ramadan Edinburgh</p>
            </footer>

        </div>    
    </body>

    <script type="text/ng-template" id="home.html">
        <div class="jumbotron text-center">
        <h1>{{ onNow }}</h1>

        <p>{{ onNext }}</p>
        <audio media-player="mediaPlayer" playlist="audioPlaylist"></audio>
        <button class="btn btn-lg btn-primary btn-block" ng-click="mediaPlayer.play()" ng-show="!mediaPlayer.playing">
            <i class="fa fa-play"></i>
        </button>
        <button class="btn btn-lg btn-primary btn-block" ng-click="mediaPlayer.stop()" ng-show="mediaPlayer.playing">
            <i class="fa fa-stop"></i>
        </button>
        </div>
    </script>

    <script type="text/ng-template" id="listenagain.html">
        <div class="jumbotron text-center">
        <h1>{{Page.title()}}</h1>

        <section plangular="{{soundcloud}}" class="panel panel-default measure-wide wrap mb4 oh rounded">
            <div class="p-responsive mobile-center">
                <div class="panel-heading">{{ message }}</div>
                <div class="panel-body">
                    <div class="clearfix">
                        <div class="left mr1 mobile-block">
                            <a href="" ng-click="player.previous(playlist)" class="btn btn-link ">
                                <i class="fa fa-step-backward"></i>
                            </a>
                            <a href="" ng-click="player.playPlaylist(playlist)" ng-hide="player.tracks == playlist.tracks && player.playing" class="btn btn-link anim-popin">
                                <i class="fa fa-play"></i>
                            </a>
                            <a href="" ng-click="player.pause()" ng-show="player.tracks == playlist.tracks && player.playing" class="btn btn-link anim-popin">
                                <i class="fa fa-pause"></i>
                            </a>
                            <a href="" ng-click="player.next(playlist)" class="btn btn-link ">
                                <i class="fa fa-step-forward"></i>
                            </a>
                        </div>
                        <div class="oh mobile-block">
                            <div class="progress progress-striped active">
                                <div class="progress-bar" role="progressbar" aria-valuenow="{{ currentTime / duration * 100}}" aria-valuemin="0" aria-valuemax="100" style="width: {{ currentTime / duration * 100}}%;" ng-click="seekTo($event)">
                                    {{ currentTime / duration * 100 | number:0}}%
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        
                <div class="list-group">
                    <li class="list-group-item m12" ng-repeat="track in playlist.tracks"><a href="" ng-click="player.play(playlist.tracks, $index)" ng-class="{ '': (player.playing || player.paused) != track, 'list-group-item active': (player.playing || player.paused) == track }">
                        <strong>{{ track.user.username }}</strong> - {{ track.title }} - <strong>{{ track.duration | date : 'mm:ss' }}</strong>
                    </a></li>
                </div>
            </div>
            <div class="panel-footer text-right">
                <a ng-href="{{ playlist.permalink_url }}" target="_blank">View on SoundCloud</a>
            </div>
        </section>
    </script>

    <script type="text/ng-template" id="schedule.html">
        <div class="jumbotron text-center">
        <h1>{{Page.title()}}</h1>

        <p>{{ message }}</p>
        <div class="calendar" ng-model="eventSources" calendar="rreCalendar" config="uiConfig.calendar" ui-calendar="uiConfig.calendar"></div>    
        </div>
    </script>

</html>